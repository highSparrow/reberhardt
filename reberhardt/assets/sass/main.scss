@import "compass";
@import "breakpoint";

@import "variables";

// Partials
@import "partials/layout";
@import "partials/typography";
@import "partials/timeline";

body {
	// min-height: 100%;
	width: 100%;
	overflow-x:hidden;
	// background-color: #111;
}

$nav-height: 4em;
$banner-height: 25em;

@keyframes move-out {
	0% {
		@include transform(translateX(0));
		text-shadow: 0 0 0 rgba(10,10,10,0);
		opacity: 1;
	}
	100% {
		@include transform(translateX(-100%));
		text-shadow: 3px 0 3px rgba(10,10,10,1);
		opacity: 0;
	}
}

@keyframes move-in {
	0% {
		@include transform(translateX(100%));
		text-shadow: 3px 0 3px rgba(10,10,10,1);
		opacity: 0;
	}
	100% {
		@include transform(translateX(0));
		text-shadow: 0 0 0 rgba(10,10,10,0);
		opacity: 1;
	}
}

@keyframes wiggle {
	0% {
		@include transform(rotate(0deg));
	}
	25% {
		@include transform(rotate(-2deg));
	}
	75% {
		@include transform(rotate(2deg));
	}
	100% {
		@include transform(rotate(0deg));
	}
}

@keyframes navbar-move-in {
	0% {
		top: -$nav-height;
		opacity: 0;
	}
	100% {
		top: 0;
		opacity: 1;
	}
}

@keyframes fade-in {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

@keyframes fade-in-up-sm {
	0% {
		@include transform(translateY(4em));
		opacity: 0;
	}
	100% {
		@include transform(translateY(0em));
		opacity: 1;
	}
}

@keyframes fade-in-up-lg {
	0% {
		@include transform(translateY(8em));
		opacity: 0;
	}
	100% {
		@include transform(translateY(0em));
		opacity: 1;
	}
}

.backgrounds, .backgrounds div {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 100%;
	z-index: -100;
}

.backgrounds {
	div:not(.gray-overlay) {
		@include transform(translateY(0));
	}
	&::before { // top mask
		content: '';
		background: #fff;
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: $nav-height;
		@include transform(translateY(#{-$nav-height}));
		@include transition(transform 1s ease-in-out);
	}

	&::after {
		content: '';
		background: #fff;
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		top: #{$nav-height + $banner-height};
		@include transform(translateY(100%));
		@include transition(transform 1s ease-in-out);
	}

	&.small div:not(.gray-overlay) {
		@include transform(translateY(-25%));
	}

	&.small::before {
		@include transform(translateY(0));
	}

	&.small::after {
		@include transform(translateY(0));
	}


	// &.small {
	// 	top: $nav-height;
	// 	height: $banner-height;
	// }

	.gray-overlay {
		background: #000;
		opacity: 0;
		z-index: -10;
		content: "";
		@include transition(opacity, 0.75s, ease-in-out);
	}

	div {
		@include background-size(cover !important);
		opacity: 0;
		@include transition(opacity 0.75s ease-in-out, transform 1s ease-in-out);
	}

	&.visible .gray-overlay {
		opacity: 0.6;
	}

	div.visible {
		opacity: 1;
	}

	#software-background {
		background: url(/assets/img/backgrounds/DSC_9869.jpg) center center no-repeat;
	}
	#photography-background {
		background: url(/assets/img/backgrounds/DSC_5179.jpg) center center no-repeat;
	}
	#music-background {
		background: url(/assets/img/backgrounds/DSC_9903.jpg) center center no-repeat;
	}
	#teaching-background {
		background: url(/assets/img/backgrounds/DSC_0231.jpg) center center no-repeat;
	}
	#resume-background {
		background: url(/assets/img/backgrounds/DSC_0229.jpg) center center no-repeat;
	}
}

.banner-heavy {
	font-size: 3.5em;
	font-weight: 700;
	margin-right: 10px;
}

.banner-light {
	font-size: 3.5em;
	font-weight: 300;
}

.center-container {
	position: absolute;
	top: 0;
	left: 0;
	height: 100vh;
	width: 100%;
}

.center-card {
	height: 300px;
	position: relative;
	@media screen and ( min-height: 300px ) {
		@include vertical-center;
	}
	@media screen and ( max-height: 300px ) {
	}
	margin-left: auto;
	margin-right: auto;
	// width: 620px;
	max-width: 650px;
	height: 300px;
	// border: 3px solid #333;
	color: #333;
	text-align: center;
	text-shadow: 0px 2px 4px rgba(0, 0, 0, 0);
	@include transition-property(text-shadow, color);
	@include transition-duration(0.5s);
	@include transition-timing-function(ease-in-out);

	.title-text {
		margin-bottom: 1.5em;
		position: relative;
	}

	.about {
		font-weight: 300;
		margin-bottom: 1.5em;
		position: relative;
	}

	.nav {
		a, a:visited {
			background-color: #333;
			border: 1px solid transparent;
			color: #eee;
		}

		a:hover {
			color: #fff;
			background-color: #333;
		}
	}
}



.nav {
	text-align: center;
	font-weight: 300;
	color: #555;
	font-size: 105%;
	line-height: 200%;
	position: relative;

	a, a:visited {
		position: relative;
		text-decoration: none;
		display: inline-block;
		margin-left: 0.5em;
		line-height: 100%;
		color: inherit;
		padding: 5px 8px;
		@include transition(0.25s ease-in-out);
	}
}

.nav.top {
	padding-top: 1em;
	height: $nav-height;

	a { background-color: transparent; }

	// Animated underline (appears on mouseover)
	a::before {
		opacity: 0;
		position: absolute;
		left: 50%;
		right: 50%;
		bottom: 0;
		top: 100%;
		@include transition($navbar-underline-transition-speed ease-in-out);
		content: " ";
		border-bottom: 1px solid #333;
		border-left: 1px solid #333;
		border-right: 1px solid #333;
	}
	a:hover {
		color: #333;
		background-color: transparent;
		&:not(.selected)::before {
			opacity: 1;
			left: 0;
			right: 0;
		}
	}

	a.selected:hover::before {
		border-color: $blue;
	}

	a.selected {
		background-color: $blue;
		color: #fff;
	}

	a::after {
		content: "";
		width: 0;
		height: 0;
		border-left: 8px solid transparent;
		border-right: 8px solid transparent;
		border-top: 0px solid transparent;
		@include transition(border-top 0.25s ease-in-out);
		top: 100%;
		left: calc( 50% - 8px );
		position: absolute;
	}
	a.selected::after {
		border-top: 8px solid $blue;
	}

	a.selected:hover {
		background-color: $blue;
	}

	a.selected:not(:active):hover {
		animation: wiggle 0.25s ease 0s 1 forwards;
	}
}

.nav.top:not(.hidden) {
	opacity: 0;
	animation: navbar-move-in 0.75s ease-out 0.25s 1 forwards;
}

.nav.top.hidden {
	top: -$nav-height;
	opacity: 0;
}

.center-card.dark {
	color: #eee;
	text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);

	.nav {
		color: #ccc;
		position: relative;

		a, a:visited {
			color: #ccc;
			background-color: transparent;
			border: 1px solid #ccc;
		}

		a:hover {
			color: #333;
			background-color: #eee;
			border: 1px solid #ccc;
		}
	}
}

.center-card.transition {
	.title-text {
		animation: move-out 0.5s ease-in 0s 1 forwards;

	}

	.about {
		animation: move-out 0.5s ease-in 0.05s 1 forwards;
	}

	.nav {
		animation: move-out 0.5s ease-in 0.10s 1 forwards;
	}
}

.center-card.return {
	.title-text {
		@include transform(translateX(100%));
		opacity: 0;
		animation: move-in 0.5s ease-out 0s 1 forwards;
	}

	.about {
		@include transform(translateX(100%));
		opacity: 0;
		animation: move-in 0.5s ease-out 0.05s 1 forwards;
	}

	.nav {
		@include transform(translateX(100%));
		opacity: 0;
		animation: move-in 0.5s ease-out 0.10s 1 forwards;
	}
}

// .footer-push {
// 	height: 1.5em;
// }

.footer {
	text-align: center;
	font-size: 1.25em;
	// position: absolute;
	// bottom: 0.5em;
	width: 100%;
	color: #555;
	@include transition(color 0.25s ease-in-out);

	a, a:visited {
		color: inherit;
		margin-right: 0.25em;
	}
}

.footer.dark {
	color: #ccc;
}

.banner {
	position: relative;
	height: $banner-height;
	width: 100%;
	color: #eee;
	font-weight: 300;
	text-align: justify;
	@include hyphens(auto);

	.content {
		margin-left: auto;
		margin-right: auto;
		position: absolute;
		bottom: 0;
		left: calc( 50% - 500px );
		right: calc( 50% - 500px );
		padding: 1em;

		.banner-heavy {
			// Hide action/blurb text that doesn't apply
			display: none;
		}

		p {
			opacity: 0;
			visibility: hidden;
			@include transition(opacity 0.25s ease-in-out);
		}

		p.show {
			opacity: 1;
			visibility: visible;
		}

		a { color: #40B8F9; }
		a:hover { color: #64C3FF; }

		.blurbs {
			position: relative;
			width: 100%;
			height: 4em;
			padding-top: 0.4em;
			overflow: visible;

			p {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
			}
		}

		.banner-heavy {
			@include transform(rotateX(0deg));
			@include transition(transform 0.15s linear);
		}

		.banner-heavy.exiting {
			@include transform(rotateX(90deg));
		}

		.banner-heavy.entering {
			@include transform(rotateX(-90deg));
		}

		// p.exiting {
		// 	@include animation(move-out 0.25s ease-in 0s 1 forwards !important);
		// }

		// p.entering {
		// 	@include animation(move-in 0.25s ease-out 0s 1 forwards !important);
		// }

	}
}

.banner.hidden {
	opacity: 0;
}

.banner:not(.hidden) {
	opacity: 0;
	@include animation(fade-in-up-sm 0.5s ease-out 0.5s 1 forwards);
}

// #content {
// 	opacity: 0;
// 	position: relative;
// 	@include transition(opacity 0.25s ease-in-out);
// }

// #content.firstload:not(.loading) {
// 	@include animation(fade-in-up-lg 0.5s ease-out 0.5s 1 forwards);
// }

// #content:not(.loading) {
// 	@include animation(fade-in 0.25s ease-out 0s 1 forwards);
// }

$loading-spinner-size: 0.8em;
$loading-spinner-duration: 1s;

#content {
	position: relative;
	height: 0;
	@include transition(height 0.5s ease-in-out);

	.loading-spinner {
		display: none;
		position: absolute;
		top: #{$nav-height + $banner-height + 1em};
		left: calc( 50% - #{$loading-spinner-size / 2} );
		opacity: 0;
		@include transition(opacity 0.25s ease-in-out);
	}
	.loading-spinner.show {
		display: block;
		opacity: 1;
		// Pause 0.25s before fading in, in case the page loads within the fadeout
		// duration (in which case we don't need to show loading spinner)
		@include transition(opacity 0.25s ease-in-out 0.25s);
	}

	.page {
		opacity: 0;
		visibility: hidden;
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		@include transition(visibility 0.25s, opacity 0.25s ease-in-out 0s);
	}

	.page.show {
		opacity: 1;
		visibility: visible;
		// Wait 0.15s to start fading in, so that the other page has a chance
		// to fade out
		@include transition(visibility 0s, opacity 0.25s ease-in-out 0.15s);
	}
}

#content.firstload {
	opacity: 0;
	@include animation(fade-in-up-lg 0.5s ease-out 0.5s 1 forwards);

	.page.show {
		opacity: 1;
		visibility: visible;
		// The #content.firstload animation will take care of introducing the
		// page. Don't bother with fading the page in; that will just burn
		// extra CPU
		@include transition(none);
	}
}

.section {
	width: 1000px;
	margin-left: auto;
	margin-right: auto;
	padding: 1em;
	position: relative;
}



.loading-spinner:before,
.loading-spinner:after,
.loading-spinner {
  border-radius: 50%;
  width: $loading-spinner-size;
  height: $loading-spinner-size;
  @include animation-fill-mode(both);
  @include animation(load7 $loading-spinner-duration infinite ease-in-out);
}
.loading-spinner {
  margin: 0 auto;
  position: relative;
  bottom: $loading-spinner-size;
  text-indent: -9999em;
  // @include transform(translateZ(0));
  @include animation-delay(-0.16s);
}
.loading-spinner:before {
  left: #{-$loading-spinner-size - 1em};
  @include animation-delay(-0.32s);
}
.loading-spinner:after {
  left: #{$loading-spinner-size + 1em};
}
.loading-spinner:before,
.loading-spinner:after {
  content: '';
  position: absolute;
  top: 0;
}
@keyframes load7 {
	0%,
	80%,
	100% {
	box-shadow: 0 $loading-spinner-size 0 #{-$loading-spinner-size/2} #aaa;
	}
	40% {
	box-shadow: 0 $loading-spinner-size 0 0 #aaa;
	}
}

.card {
	width: 49%;
	padding: 1em;
	display: inline-block;
	position: relative;
	@include clearfix();
	// border: 1px solid #ccc;
	// @include border-radius(8px);

	.logo {
		display: block;
		width: 30%;
		float: left;

		img { width: 100%; }
	}

	.info {
		width: 70%;
		float: right;
		padding-left: 1em;

		h2 { padding: 0; }

		p {
			// text-align: justify;
			// @include hyphens(auto);
		}

		.at-a-glance {
			border-top: 1px dashed #ddd;
			border-bottom: 1px dashed #ddd;
			position: absolute;
			bottom: 1.1em;
			left: calc( 30% + 1.4em );
			right: 1em;
			padding-top: 0.25em;
			padding-bottom: 0.1em;
		}

		.dates {
			display: inline-block;
			float: right;
			font-size: 80%;
			position: relative;
			top: 0.2em;
		}

		.technologies {
			list-style-type: none;
			padding: 0;
			float: left;
			// text-align: right;
			// $ribbon-color: #888;
			// $ribbon-side-size: 1em;

			// li {
			// 	font-size: 80%;
			// 	position: relative;
			// 	display: inline-block;
			// 	background: $ribbon-color;
			// 	color: #fff;
			// 	text-align: center;
			// 	padding: 0.15em 0.25em;
			// 	margin: 0 $ribbon-side-size;
			// }
			// li:before, li:after {
			// 	content: "";
			// 	position: absolute;
			// 	display: block;
			// 	bottom: -0.15em;
			// 	border: 0.8em solid darken($ribbon-color, 10);
			// 	z-index: -1;
			// }
			// li:before {
			// 	left: #{-$ribbon-side-size};
			// 	border-right-width: $ribbon-side-size;
			// 	border-left-color: transparent;
			// }
			// li:after {
			// 	right: #{-$ribbon-side-size};
			// 	border-left-width: $ribbon-side-size;
			// 	border-right-color: transparent;
			// }
			// li span:before, li span:after {
			// 	content: "";
			// 	position: absolute;
			// 	display: block;
			// 	border-style: solid;
			// 	border-color: darken($ribbon-color, 25) transparent transparent transparent;
			// 	bottom: -0.15em;
			// }
			// li span:before {
			// 	left: 0;
			// 	border-width: 0.15em 0 0 0.75em;
			// }
			// li span:after {
			// 	right: 0;
			// 	border-width: 0.15em 0.75em 0 0;
			// }
			li {
				display: inline-block;
				height: 1.5em;
				margin-right: 0.25em;
				// border: 1px solid #aaa;
				background: #eaeaea;
				@include border-radius(2px);
				font-size: 80%;
			}

			li img {
				height: 100%;
				// @include filter(grayscale(100%));
				// @include transition(filter 0.1s ease-in-out);
			}

			li span {
				position: relative;
				top: -0.2em;
				margin-left: 0.25em;
				margin-right: 0.25em;
			}
		}
	}
	// .info:hover .technologies {
	// 	li img {
	// 		@include filter(grayscale(0));
	// 	}
	// }
}
